function getVal(t){return $("#"+t).val()}function unpackUrl(){var t=getVal("url"),e=/http[s]?:\/\/gist\.github\.com\/([a-zA-Z0-9\-\_]*)[\/]?([a-zA-Z0-9\-\_]*)/.exec(t);if(e){var r=e[2]||e[1];if(r)return{type:"gist",url:"/github/gist/"+r}}else{var u=/http[s]?:\/\/(github|bitbucket)\.(com|org)\/([a-zA-Z0-9\-\_]+)[\/]([a-zA-Z0-9\-\_]+)[\/][a-zA-Z0-9\-\_]*[\/]([a-zA-Z0-9\-\_\.]*)[\/]([a-zA-Z0-9\-\_\/\.]*)/.exec(t);if(u){var a=u[1],l=u[3],n=u[4],s=u[5],i=u[6];if(a&&l&&n&&s&&i)return{type:"repo",url:"/"+a+"/"+l+"/"+n+"/"+i+"?branch="+s}}else;}}function getQueryString(t,e){var r=[],u=getVal("slicefrom"),a=getVal("sliceto"),l=getVal("lang"),n=getVal("style");return u&&a?r.push("slice="+u+":"+a):u?r.push("slice="+u):a&&r.push("slice="+a),l&&r.push("lang="+l),n&&r.push("style="+n),e&&r.push("type=html"),r.length>0?("repo"===t?"&":"?")+r.join("&"):""}function fadeOut(){setTimeout(function(){$(".alert-popup").fadeOut()},1e4)}function showResult(){$("#result").hide(),$(".alert-popup").fadeOut();var t=unpackUrl();if(t){var e=t.url+getQueryString(t.type,!1),r=t.url+getQueryString(t.type,!0);$.get(r).done(function(t){$("#result-url").text("//"+location.host+e),$("#html-result").html(t),$("#result").show(),$(".alert-success").fadeIn(fadeOut)}).fail(function(t,e,r){400===t.status||412===t.status?$("#error-msg").text("Invalid URL or private file."):404===t.status?$("#error-msg").text("File not found."):$("#error-msg").text("Unknown error."),$(".alert-danger").fadeIn(fadeOut)})}else $("#error-msg").text("Invalid URL."),$(".alert-danger").fadeIn(fadeOut)}$(document).ready(function(){$("a[data-try-url]").click(function(){$("#url").val($(this).data("try-url")),$("#url-help").modal("hide"),$("#formtry").submit()}),$("#formtry").submit(function(t){t.preventDefault(),showResult()})});