function getVal(t){return $("#"+t).val()}function unpackUrl(){var t=getVal("url"),e=/http[s]?:\/\/gist\.github\.com\/([a-zA-Z0-9\-\_]*)[\/]?([a-zA-Z0-9\-\_]*)/.exec(t);if(e){var r=e[2]||e[1];if(r)return{type:"gist",url:"/github/gist/"+r}}else{var l=/http[s]?:\/\/(github|bitbucket)\.(com|org)\/([a-zA-Z0-9\-\_]+)[\/]([a-zA-Z0-9\-\_]+)[\/][a-zA-Z0-9\-\_]*[\/]([a-zA-Z0-9\-\_\.]*)[\/]([a-zA-Z0-9\-\_\/\.]*)/.exec(t);if(l){var u=l[1],a=l[3],n=l[4],s=l[5],i=l[6];if(u&&a&&n&&s&&i)return{type:"repo",url:"/"+u+"/"+a+"/"+n+"/"+i+"?branch="+s}}else;}}function getQueryString(t,e){var r=[],l=getVal("slicefrom"),u=getVal("sliceto"),a=getVal("lang"),n=getVal("style");return l&&u?r.push("slice="+l+":"+u):l?r.push("slice="+l):u&&r.push("slice="+u),a&&r.push("lang="+a),n&&r.push("style="+n),e&&r.push("type=html"),r.length>0?("repo"===t?"&":"?")+r.join("&"):""}function showResult(){$("#result").hide(),$(".alert-popup").fadeOut();var t=unpackUrl();if(t){var e=t.url+getQueryString(t.type,!1),r=t.url+getQueryString(t.type,!0);$.get(r).done(function(t){$("#result-url").text("//"+location.host+e),$("#html-result").html(t),$("#result").show(),$(".alert-success").fadeIn()}).fail(function(t,e,r){400===t.status||412===t.status?$("#error-msg").text("Invalid URL or private file."):404===t.status?$("#error-msg").text("File not found."):$("#error-msg").text("Unknown error."),$(".alert-danger").fadeIn()})}else $("#error-msg").text("Invalid URL."),$(".alert-danger").fadeIn()}$(document).ready(function(){$("a[data-try-url]").click(function(){$("#url").val($(this).data("try-url")),$("#url-help").modal("hide"),$("#formtry").submit()}),$("#formtry").submit(function(t){t.preventDefault(),showResult()})});